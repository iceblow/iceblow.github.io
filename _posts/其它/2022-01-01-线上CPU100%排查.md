---
layout: post
title: 线上CPU 100%排查
categories: [其它]
description: some word here
keywords: keyword1, keyword2
---

假如线上服务器的CPU使用率达到100%？ 该如何排查、定位和解决问题？

步骤1，定位进程， 找到CPU占用最高的进程（%CPU指标）

```shell
top
```

![image-20220413192643773](https://cdn.jsdelivr.net/gh/iceblow/images/20220413192643.png)

步骤2，定位线程，根据排序，找到占用CPU最高的线程

```
top -Hp {进程PID}
```

![image-20220413192900440](https://cdn.jsdelivr.net/gh/iceblow/images/20220413192900.png)

PID转为16进制

```xshell
printf "%x\n" {线程id}
```

打印线程的堆栈信息，可定位到具体原因

```xshell
 jstack {PID} |grep {0xid} -A 100
```
